# -----------------------------
# Prefix
# -----------------------------
unbind C-b
set-option -g prefix C-a
bind C-a send-prefix

# -----------------------------
# Status bar
# -----------------------------
set -g status-bg colour235
set -g status-fg colour136
set -g status-left-length 40
set -g status-right-length 120
set -g status-interval 5

# Left: hostname + session name
set -g status-left "#[fg=green,bold] #H #[fg=colour238]| #[fg=cyan]#S "

# Right: date, time, uptime
set -g status-right "#[fg=yellow]%Y-%m-%d #[fg=cyan]%H:%M #[fg=colour39]#(uptime | awk -F, '{print $1}') "

# Window tabs appearance
setw -g window-status-format " #[fg=colour244]#I:#W "
setw -g window-status-current-format " #[bg=colour46,fg=colour235,bold]#I:#W #[default]"

# -----------------------------
# Pane navigation (Vim style)
# -----------------------------
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Resize panes with Alt + h/j/k/l
bind -n M-h resize-pane -L 5
bind -n M-j resize-pane -D 5
bind -n M-k resize-pane -U 5
bind -n M-l resize-pane -R 5

# -----------------------------
# Copy mode using Vim keys
# -----------------------------
setw -g mode-keys vi
bind-key -T copy-mode-vi v send -X begin-selection
bind-key -T copy-mode-vi y send -X copy-selection-and-cancel
bind-key -T copy-mode-vi h send -X cursor-left
bind-key -T copy-mode-vi j send -X cursor-down
bind-key -T copy-mode-vi k send -X cursor-up
bind-key -T copy-mode-vi l send -X cursor-right
bind-key -T copy-mode-vi H send -X halfpage-up
bind-key -T copy-mode-vi L send -X halfpage-down

# -----------------------------
# Useful shortcuts
# -----------------------------
bind r source-file ~/.tmux.conf \; display-message "Config reloaded!"
bind x kill-pane
bind c new-window
bind & kill-window
bind n next-window
bind p previous-window

# Clear screen with Ctrl+l
bind -n C-l send-keys C-l

# -----------------------------
# History and scroll
# -----------------------------
setw -g history-limit 5000

# -----------------------------
# TPM (Tmux Plugin Manager)
# -----------------------------
# First-time plugin installation: open tmux and press prefix + I (Ctrl+a I)
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

# Load TPM
run '~/.tmux/plugins/tpm/tpm'

